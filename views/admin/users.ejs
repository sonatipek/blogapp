<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head.ejs', {title: "User List"}) %>
</head>
<body>
    <!-- Navbar -->
    <%- include('../partials/navbar') %>

    <div class="container">
        <% if (action && action === "create") { %>
            <%- include('../partials/alert.ejs', {alertClass: "success", alertText: "New User Created!"}) %>
        <% } %>
        
        <% if (action && action === "update") { %>
            <%- include('../partials/alert.ejs', {alertClass: "warning", alertText: "User Updated!"}) %>
        <% } %>

        <% if (action && action === "delete") { %>
            <%- include('../partials/alert.ejs', {alertClass: "danger", alertText: "User Role Deleted!"}) %>
        <% } %>
    </div>
        
    <table class="table table-hover container mx-auto mt-3">
        <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">User</th>
              <th scope="col">Email</th>
              <th scope="col">Role</th>
              <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            <% users.forEach(user => { %>
                <tr>
                  <th scope="row">#<%= user.id %></th>
                  <td><%= user.fullname %></td>
                  <td><%= user.email %></td>
                  <td><%= user['roles.role_name'] %></td>
                  <td>
                    <a href="/admin/users/<%= user.id %>" class="btn btn-sm btn-outline-danger">Edit User</a>
                    <a href="/admin/users/remove-role/<%= user.id %>/" class="btn btn-sm btn-danger">Romve User Role</a>
                </td>
                </tr>
             
            <% }) %>
        </tbody>
    </table>
</body>

</html>